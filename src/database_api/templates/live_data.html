{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <div>
        <h1 class="mb-0">Live ADS-B Data</h1>
        <p class="text-secondary mb-0">Showing aircraft observed in the last {{ window_minutes }} minutes.</p>
    </div>
    <a class="btn btn-outline-light" href="{{ url_for('live_data') }}">Refresh</a>
</div>
{% if aircraft %}
<div class="table-responsive">
    <table class="table table-striped table-dark align-middle">
        <thead>
            <tr>
                <th scope="col">ICAO</th>
                <th scope="col">Callsign</th>
                <th scope="col">First Seen</th>
                <th scope="col">Latitude</th>
                <th scope="col">Longitude</th>
                <th scope="col">Altitude (ft)</th>
                <th scope="col">Speed (kt)</th>
                <th scope="col">Track (Â°)</th>
                <th scope="col">Vertical Rate</th>
                <th scope="col">Last Update</th>
            </tr>
    </thead>
    <tbody>
            {% for ac in aircraft %}
            <tr>
                <td>{{ ac.icao }}</td>
                <td>{{ (ac.callsign or "&nbsp;")|safe }}</td>
        <td>{{ ac.first_seen or "" }}</td>
                <td>{{ ac.position.lat|format_coord }}</td>
                <td>{{ ac.position.lon|format_coord }}</td>
                <td>{{ ac.position.altitude|default("", true) }}</td>
                <td>{{ ac.velocity.speed|default("", true) }}</td>
                <td>{{ ac.velocity.track|default("", true) }}</td>
                <td>{{ ac.velocity.vertical_rate|default("", true) }}</td>
                <td>{{ ac.last_seen or "" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p class="text-secondary">No aircraft observed in the selected window.</p>
{% endif %}
{% endblock %}
