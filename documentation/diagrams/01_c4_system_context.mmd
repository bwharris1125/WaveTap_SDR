C4Context
title "WaveTap - System Context (Current & Planned)"

Person(user, "Operations Analyst", "Browses dashboards and manages SDR modules")

System_Ext(aircraft, "Aircraft", "Broadcast ADS-B frames on 1090 MHz")
System_Ext(rtlsdr, "USB RTL-SDR", "Captures RF energy from antennas")
System_Ext(dump1090, "dump1090 Decoder", "Transforms Mode-S bits into TCP stream")

System_Boundary(wavetap, "WaveTap Platform") {
    System(control_center, "WaveTap Control Center", "Flask UI + REST endpoints for ADS-B telemetry")
    System(arbiter, "Arbiter Service", "Flask control plane for registering and coordinating SDR modules")
    SystemDb(data_store, "Telemetry Store", "SQLite database shared across services")
}

System_Ext(future_voice, "VHF Voice Capture (Planned)", "Roadmap: aviation-band audio capture, transcription")
System_Ext(future_broadcast, "Broadcast Analytics (Planned)", "Roadmap: FM/AM demodulation and analytics")

Rel(aircraft, rtlsdr, "Broadcast RF")
Rel(rtlsdr, dump1090, "USB IQ sampled")
Rel(dump1090, control_center, "Mode-S messages over TCP 30002 via publisher")
Rel(control_center, data_store, "Persists aircraft telemetry")
Rel(user, control_center, "Explores dashboards & APIs", "HTTPS/WebSocket")
Rel(user, arbiter, "Manages module lifecycle", "HTTPS/JSON")
Rel(arbiter, control_center, "Coordinates module state")
Rel(future_voice, arbiter, "Future module registration")
Rel(future_broadcast, arbiter, "Future module registration")
Rel(future_voice, control_center, "Planned data ingest & dashboards")
Rel(future_broadcast, control_center, "Planned data ingest & dashboards")